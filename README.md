dirdemo — Графическое приложение QT для поиска строки в файлах
-------------------------------------------------------

### Описание файлов

Исходный код расположен в файлах
 - `main.cpp`— файл с функцией `main`
 - `mainwindow.h`, `mainwindow.cpp` — код главного окна приложения
 
 Кроме исходного кода есть
 - `mainwindow.ui` — XML-файл с описанием главного окна. В процессе сборки на его основе утилитой `uic` будет сгенерён файл `ui_mainwindow.h`, который включается в `mainwindow.cpp`. `ui`-файлы можно открыть Qt Designer'ом. Qt Creator имеет Qt Designer встроенный в себя и тоже умеет открывать `ui`-файлы.
 - `CMakeLists.txt` — билд-скрипт для `cmake`.  Не используется при билде `qmake`'ом.
 - `dirdemo.pro` — файл-проект для `qmake`. Не используется при билде `cmake`'ом.

### Сборка `cmake`'ом

    $ cmake -DCMAKE_BUILD_TYPE=Debug .
    $ make

Вместо `-DCMAKE_BUILD_TYPE=Debug` может быть `-DCMAKE_BUILD_TYPE=RelWithDebInfo` или что-то другое в зависимости от того, какую конфигурацию вы желаете.

### Сборка qmake'ом

    $ qmake CONFIG+=debug -o Makefile dirdemo.pro
    $ make

-------------------------------------------------------
Этот проект мой самый технически сложный и объемный в программировании, но в то же время и самый интересный.

#### Что сделал?
Я реализовал на C++ многопоточную программу с графической оболочкой QT с кучей кнопок (например, остановки поиска), выбором директорий и удобным выводом результата. Удобным, то есть с возможностью по нажатию на файл из списка увидеть тут же его содержимое, а затем, нажимая по кнопкам, переходить по совпадениям в нем.

Основано решение на докладе команды из Google, а именно - поиске по триграммам (триграмма - подстрока из 3 подряд символов). Оказывается, если в файле содержатся все триграммы искомой строки, то почти наверняка содержится и сама строка. Поэтому мы сначала молниеносно сканируем директорию, находя триграммы в файлах и запоминая какие где, а затем, когда нам поступает запрос на поиск строки, ищем по ее триграммам. Затем проверяем, что эта строка действительно есть в файле, а не просто ее триграммы.

#### Результат
##### Бенчмарки
Результаты впечатляют. Индексация происходит почти со скоростью чтения с диска и зависит от железа – HDD или SSD, то есть 100-500 мб/c. А заканчивает искать строчку через 0,5-5 секунд после начала в зависимости от размера директории, то есть почти со скоростью ввода букв в строку поиска.
##### Дополнительно
В качестве дополнительного функционала я реализовал многопоточность для независимой работы потоков графического интерфейса, индексации, поиска. Пользователь может смотреть файлы, пока происходит поиск строки. Может и остановить в любой момент выполняемый процесс по нажатию на кнопку или просто отмасштабировать окно приложения. В любом случае **графический интерфейс не лагает**. Так же я настроил обновление индексации в случае изменения файлов. 

##### 
Что из себя представляет графический интерфейс на движке QT? Сверху выбор директории, под ней поле для ввода искомой строки. В левой половине список файлов с искомой строкой, по нажатию на один из них он выводится на правой половине. По выведенному файлу можно перемещаться по совпадениям, нажимая на кнопки. Так же снизу прогресс-бар выполнения этапов работы, время их выполнения.


#### С чем стокнулся
QT обалденный фреймворк. Я в итоге легко как создал красивый и удобный графический интерфейс с широким функционалом, так и реализовал многопоточность. Но легко потому, что я в какой-то момент наконец разобрался во всем) 

Простые штуки действительно просто делать, но, если что-то хоть немного сложное и нетривиальное, то сталкиваешься с ограничениями QT (я иногда натыкался на неожиданное отсутствие нужных мемберов в классах), а в интернете часто примеры это именно что примеры - они написаны без мысли, что ты собираешься использовать их код совместно с другим кодом.

Самым сложным было понять *как правильно организовать несколько крупных потоков*, которые ты то выключаешь, то включаешь, хотя казалось бы – это лишь немного сложнее «линейных» графических приложений. 

Но знакомые, гугл, дедлайны и несколько бессонных ночей сделали свое дело) и я стал специалистом по QT фреймворку, создав отличнейшее приложение.

#### В итоге
Разбираться в новой технологии, гуглить, мучиться, обходить ограничения, тестировать и видеть тут же результат было безумно интересно. Я рад, что у меня получилось выполнить этот проект и я им горжусь.
